---
import { Image } from "astro:assets";
//Actuales
import apple from '../../public/assets/carousel-logos/actual/apple.svg'
import atom from '../../public/assets/carousel-logos/actual/atom.svg'
import behance from '../../public/assets/carousel-logos/actual/behance.svg'
import discord from '../../public/assets/carousel-logos/actual/discord.svg'
import facebook from '../../public/assets/carousel-logos/actual/facebook.svg'
import github from '../../public/assets/carousel-logos/actual/github.svg'
import google from '../../public/assets/carousel-logos/actual/google.svg'
import instagram from '../../public/assets/carousel-logos/actual/instagram.svg'
import linkedin from '../../public/assets/carousel-logos/actual/linkedin.svg'
import nestle from '../../public/assets/carousel-logos/actual/nestle.svg'
import photoshop from '../../public/assets/carousel-logos/actual/photoshop.svg'

//Pasados
import postgres from '../../public/assets/carousel-logos/pasados/postgre.svg'
import pinterest from '../../public/assets/carousel-logos/pasados/pinterest.svg'
import spotify from '../../public/assets/carousel-logos/pasados/spotify.svg'
import telegram from '../../public/assets/carousel-logos/pasados/telegram.svg'
import tiktok from '../../public/assets/carousel-logos/pasados/tik-tok.svg'
import tripadvisor from '../../public/assets/carousel-logos/pasados/tripadvisor.svg'
import twitter from '../../public/assets/carousel-logos/pasados/twitter.svg'
import ubuntu from '../../public/assets/carousel-logos/pasados/ubuntu.svg'
import vk from '../../public/assets/carousel-logos/pasados/vk.svg'
import whatsapp from '../../public/assets/carousel-logos/pasados/whatsapp.svg'
import youtube from '../../public/assets/carousel-logos/pasados/youtube.svg'
---

<div class="carousel">


    <h2>Empresas con acuerdos pasados</h2>
    <div class="carousel-container past">
        <div class="carousel-slide">

            <Image src={pinterest} alt="logo pinterest" />
            <Image src={spotify} alt="logo spotify" />
            <Image src={telegram} alt="logo telegram" />
            <Image src={tiktok} alt="logo tiktok" />
            <Image src={tripadvisor} alt="logo tripadvisor" />
            <Image src={twitter} alt="logo twitter" />
            <Image src={ubuntu} alt="logo ubuntu" />
            <Image src={vk} alt="logo vk" />
            <Image src={whatsapp} alt="logo whatsapp" />
            <Image src={youtube} alt="logo youtube" />
        </div>
        <button class="prev-btn">&#10094;</button>
        <button class="next-btn">&#10095;</button>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const carouselContainers = document.querySelectorAll('.carousel-container');

        carouselContainers.forEach(container => {
            const carouselSlide = container.querySelector('.carousel-slide');
            const logos = carouselSlide.children; // Obtén los elementos hijos en lugar de usar querySelectorAll

            let counter = 0;
            const slideWidth = logos[0].offsetWidth + 20; // Suma el ancho y el margen de las imágenes

            function nextSlide() {
                if (counter >= logos.length - 4) return; // Ajusta el número de imágenes mostradas
                counter++;
                carouselSlide.style.transition = 'transform 0.4s ease-in-out'; // Agrega transición suave
                carouselSlide.style.transform = `translateX(${-slideWidth * counter}px)`;
            }

            function prevSlide() {
                if (counter <= 0) return;
                counter--;
                carouselSlide.style.transition = 'transform 0.4s ease-in-out'; // Agrega transición suave
                carouselSlide.style.transform = `translateX(${-slideWidth * counter}px)`;
            }

            container.querySelector('.next-btn').addEventListener('click', nextSlide);
            container.querySelector('.prev-btn').addEventListener('click', prevSlide);

            // Reinicia el contador cuando llega al final o al principio
            carouselSlide.addEventListener('transitionend', () => {
                if (logos[counter].id === 'lastClone') {
                    carouselSlide.style.transition = 'none';
                    counter = logos.length - 6; // Ajusta el número de imágenes mostradas
                    carouselSlide.style.transform = `translateX(${-slideWidth * counter}px)`;
                }
                if (logos[counter].id === 'firstClone') {
                    carouselSlide.style.transition = 'none';
                    counter = logos.length - counter; // Ajusta el número de imágenes mostradas
                    carouselSlide.style.transform = `translateX(${-slideWidth * counter}px)`;
                }
            });
        });
    });

</script>

<style>
    .carousel {
        margin: 20px auto;
        width: 80%;
    }

    .carousel h2 {
        text-align: center;
    }

    .carousel-container {
        overflow: hidden;
    }

    .carousel-slide {
        display: flex;
    }

    .carousel-slide img {
        width: 100px; /* Ajusta el tamaño de los logos según necesites */
        height: auto;
        margin: 0 10px;
    }

</style>
